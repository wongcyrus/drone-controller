<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Drone Simulator 3D</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div id="app">
        <!-- Header -->
        <header class="header">
            <h1>üöÅ Drone Simulator 3D</h1>
            <div class="mode-selector">
                <button id="singleMode" class="mode-btn active">Single Drone</button>
                <button id="swarmMode" class="mode-btn">Swarm Mode</button>
            </div>
        </header>

        <!-- Main Content -->
        <div class="main-content">
            <!-- 3D Viewport -->
            <div id="viewport" class="viewport">
                <canvas id="canvas3d"></canvas>

                <!-- Loading Screen -->
                <div id="loadingScreen" class="loading-screen">
                    <div class="spinner"></div>
                    <p>Loading Drone Simulator...</p>
                </div>

                <!-- HUD Overlay -->
                <div id="hud" class="hud">
                    <div class="status-panel">
                        <h3>Drone Status</h3>
                        <div id="droneStats"></div>
                    </div>
                </div>
            </div>

            <!-- Control Panel -->
            <div class="control-panel">
                <!-- Single Drone Controls -->
                <div id="singleControls" class="controls-section">
                    <h3>Single Drone Control</h3>

                    <div class="drone-info">
                        <label>Drone ID:</label>
                        <input type="text" id="droneId" value="drone_001" readonly>
                        <label>IP Address:</label>
                        <input type="text" id="droneIp" value="192.168.10.1" placeholder="Optional">
                    </div>

                    <div class="flight-controls">
                        <h4>Flight Controls</h4>
                        <div class="button-group">
                            <button id="connectBtn" class="btn btn-primary">Connect</button>
                            <button id="takeoffBtn" class="btn btn-success" disabled>Takeoff</button>
                            <button id="landBtn" class="btn btn-warning" disabled>Land</button>
                            <button id="emergencyBtn" class="btn btn-danger">Emergency Stop</button>
                        </div>
                    </div>

                    <div class="movement-controls">
                        <h4>Movement</h4>
                        <div class="movement-grid">
                            <button class="move-btn" data-move="0,0,50">‚Üë Up</button>
                            <button class="move-btn" data-move="0,100,0">‚Üë Forward</button>
                            <button class="move-btn" data-move="0,0,-50">‚Üì Down</button>
                            <button class="move-btn" data-move="-100,0,0">‚Üê Left</button>
                            <button class="move-btn" data-move="0,-100,0">‚Üì Back</button>
                            <button class="move-btn" data-move="100,0,0">‚Üí Right</button>
                        </div>

                        <div class="custom-move">
                            <label>Custom Move (cm):</label>
                            <input type="number" id="moveX" placeholder="X" value="0">
                            <input type="number" id="moveY" placeholder="Y" value="0">
                            <input type="number" id="moveZ" placeholder="Z" value="0">
                            <button id="customMoveBtn" class="btn">Move</button>
                        </div>

                        <div class="rotation-control">
                            <label>Rotation (degrees):</label>
                            <input type="number" id="rotationAngle" placeholder="Angle" value="90">
                            <button id="rotateBtn" class="btn">Rotate</button>
                        </div>
                    </div>
                </div>

                <!-- Swarm Controls -->
                <div id="swarmControls" class="controls-section" style="display: none;">
                    <h3>Swarm Control</h3>

                    <div class="swarm-management">
                        <h4>Swarm Management</h4>
                        <div class="add-drone">
                            <input type="text" id="newDroneId" placeholder="Drone ID">
                            <input type="text" id="newDroneIp" placeholder="IP Address (optional)">
                            <button id="addDroneBtn" class="btn btn-primary">Add Drone</button>
                        </div>

                        <div class="swarm-actions">
                            <button id="initSwarmBtn" class="btn btn-primary">Initialize Swarm</button>
                            <button id="swarmTakeoffBtn" class="btn btn-success" disabled>Swarm Takeoff</button>
                            <button id="swarmLandBtn" class="btn btn-warning" disabled>Swarm Land</button>
                            <button id="swarmEmergencyBtn" class="btn btn-danger">Emergency Stop All</button>
                        </div>
                    </div>

                    <div class="formation-controls">
                        <h4>Formation Control</h4>
                        <select id="formationType">
                            <option value="line">Line Formation</option>
                            <option value="circle">Circle Formation</option>
                            <option value="diamond">Diamond Formation</option>
                            <option value="v">V Formation</option>
                        </select>
                        <button id="createFormationBtn" class="btn">Create Formation</button>

                        <div class="formation-move">
                            <label>Move Formation:</label>
                            <input type="number" id="formationX" placeholder="X" value="0">
                            <input type="number" id="formationY" placeholder="Y" value="0">
                            <input type="number" id="formationZ" placeholder="Z" value="0">
                            <button id="moveFormationBtn" class="btn">Move Formation</button>
                        </div>
                    </div>

                    <div id="droneList" class="drone-list">
                        <h4>Active Drones</h4>
                        <div id="droneItems"></div>
                    </div>
                </div>

                <!-- Command Log -->
                <div class="command-log">
                    <h4>Command Log</h4>
                    <div id="logOutput" class="log-output"></div>
                    <button id="clearLogBtn" class="btn btn-sm">Clear Log</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/examples/js/controls/OrbitControls.js"></script>
    <script src="js/DroneModel.js"></script>
    <script src="js/Environment.js"></script>
    <script src="js/PhysicsEngine.js"></script>
    <script src="js/DroneSimulator.js"></script>
    <script src="js/SwarmManager.js"></script>
    <script src="js/FormationManager.js"></script>
    <script src="js/UI.js"></script>
    <script src="js/main.js"></script>
</body>
</html>
